<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zubo Raku - ä»Šæ—¥ã®ã‚„ã‚‹ã“ã¨</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
  <header>
    <h1>Zubo Raku</h1>
    <p class="subtitle">ã§ããŸã‚‰ãˆã‚‰ã„ã€ã§ããªãã¦ã‚‚ãˆã‚‰ã„</p>
    <nav class="menu">
      <a href="{{ url_for('index') }}">Home</a>
      <a href="{{ url_for('todo') }}" class="active">Todo</a>
      <a href="{{ url_for('log') }}">Log</a>
      <a href="{{ url_for('edit') }}">Edit</a>
      <a href="{{ url_for('register') }}">Register</a>
    </nav>
  </header>

  <main class="todo-main">
    <h2>ä»Šæ—¥ã®ã‚„ã‚‹ã“ã¨</h2>
    <p class="date-text">{{ today }}</p>

    {% for category, tasks in grouped_tasks.items() %}
    <section class="category-card">
      <h3>ğŸ§¹ {{ category }}</h3>
      <div class="task-list">
        {% for t in tasks %}
        <div class="task-card" onclick="openModal('{{ t.subtask }}')">
          <span class="task-name">{{ t.subtask }}</span>
        </div>
        {% endfor %}
      </div>
    </section>
    {% endfor %}
  </main>

  <!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="taskModal" class="modal">
    <div class="modal-content">
      <h2 id="modalTaskName"></h2>
      <p>ã©ã†ã—ã¾ã™ã‹ï¼Ÿ</p>
      <div class="modal-buttons">
        <button class="btn-done">âœ… å®Œäº†</button>
        <button class="btn-defer">â¡ ã‚ã™ã¸</button>
        <button class="btn-skip">âœ– ã‚¹ã‚­ãƒƒãƒ—</button>
      </div>
      <button class="modal-close" onclick="closeModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
    </div>
  </div>

  <script>
    const modal = document.getElementById('taskModal');
    const modalTaskName = document.getElementById('modalTaskName');

    function openModal(taskName) {
      modalTaskName.textContent = taskName;
      modal.classList.add('show');
    }

    function closeModal() {
      modal.classList.remove('show');
    }

    // èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§ã‚‚é–‰ã˜ã‚‹
    window.onclick = function(event) {
      if (event.target === modal) {
        closeModal();
      }
    };
  </script>
</body>
</html>
